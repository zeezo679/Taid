@using Demo.Models.Entities
@using Demo.ViewModel
@model CourseViewModel

<div class="container mt-4">
    <div class="card shadow-sm border-0 rounded-3">
        <div class="card-header bg-primary text-white p-4">
            <div class="d-flex align-items-center">
                <div class="p-3 bg-white bg-opacity-25 rounded-3 me-3">
                    <i data-feather="plus-circle" class="icon text-white"></i>
                </div>
                <div>
                    <h2 class="h3 mb-1 fw-bold text-white">Add New Course</h2>
                    <p class="mb-0 text-white-50">Fill in the details to add a new course to the system</p>
                </div>
            </div>
        </div>
        
        <div class="card-body p-4">
            <form method="post" asp-action="addCourse" asp-controller="course" asp-route-id="@Model.Id">
                <input asp-for="Id" type="hidden" />
                
                <div asp-validation-summary="All" class="alert alert-danger" role="alert" style="display: none;"></div>
                
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label d-flex align-items-center" asp-for="Name">
                                <i data-feather="type" class="icon-sm text-primary me-2"></i>
                                Course Name
                            </label>
                            <input type="text" asp-for="Name" 
                                   class="form-control" 
                                   placeholder="Enter course name" />
                            <span asp-validation-for="Name" class="field-validation-error"></span>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label d-flex align-items-center" asp-for="Degree">
                                <i data-feather="award" class="icon-sm text-primary me-2"></i>
                                Maximum Degree
                            </label>
                            <input type="number" asp-for="Degree" 
                                   class="form-control" 
                                   placeholder="Enter maximum degree" 
                                   required />
                            <span asp-validation-for="Degree" class="field-validation-error"></span>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label d-flex align-items-center" asp-for="MinDegree">
                                <i data-feather="target" class="icon-sm text-primary me-2"></i>
                                Minimum Degree
                            </label>
                            <input type="number" asp-for="MinDegree" 
                                   class="form-control" 
                                   placeholder="Enter minimum degree" 
                                   min="0" 
                                   required />
                            <span asp-validation-for="MinDegree" class="field-validation-error"></span>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label d-flex align-items-center" asp-for="DeptId">
                                <i data-feather="building" class="icon-sm text-primary me-2"></i>
                                Department
                            </label>
                            <select asp-for="DeptId" class="form-select" required>
                                <option value="" disabled selected>Select a department</option>
                                @foreach(Department dept in Model.Departments)
                                {
                                    <option value="@dept.Id">@dept.Name</option>
                                }
                            </select>
                            <span asp-validation-for="DeptId" class="field-validation-error"></span>
                        </div>
                    </div>
                </div>
                
                <hr class="my-4">
                
                <div class="d-flex gap-3">
                    <button type="submit" class="btn btn-primary d-flex align-items-center">
                        <i data-feather="plus" class="icon-sm me-2"></i>
                        Add Course
                    </button>
                    
                    <a asp-action="Index" asp-controller="Course" class="btn btn-outline-secondary d-flex align-items-center">
                        <i data-feather="arrow-left" class="icon-sm me-2"></i>
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts{
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"></script>
    
    <script>
        // Initialize feather icons
        feather.replace();
        
        // Show validation summary if there are errors
        if ($('.field-validation-error').filter(function() { return $(this).text().length > 0; }).length > 0) {
            $('.alert-danger').show();
        }
    </script>
}